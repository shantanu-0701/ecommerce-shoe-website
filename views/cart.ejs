<%- include('./partials/head2') %>

<div class="min-h-screen bg-gray-50 px-10 py-16">
  <h2 class="text-3xl font-bold mb-8 text-center">Your Shopping Cart</h2>

  <div class="flex gap-10">

    <!-- Left: Cart Items -->
    <div class="w-2/3">
      <% if (cartItems.length === 0) { %>
        <div class="text-center text-gray-600">Your cart is empty.</div>
      <% } else { %>
        <% cartItems.forEach(item => { %>
          <div class="flex gap-6 bg-white rounded-xl shadow-md p-4 mb-6">
            <div class="w-40 h-40 bg-gray-200 overflow-hidden rounded-md">
              <% if (item.image) { %>
                <img src="<%= item.image %>" alt="<%= item.name %>" class="w-full h-full object-cover" />
              <% } else { %>
                <div class="h-full flex items-center justify-center text-gray-500">No Image</div>
              <% } %>
            </div>
            <div class="flex flex-col justify-between w-full">
              <div>
                <h3 class="text-xl font-semibold"><%= item.name %></h3>
                <p class="text-gray-600 mt-1">Price: ₹ <%= item.price %></p>
                <% if (item.discount > 0) { %>
                  <p class="text-green-600 mt-1">Discount: ₹ <%= item.discount %></p>
                <% } %>
              </div>
              <div>
                <a href="/removefromcart/<%= item._id %>" class="text-red-500 hover:underline text-sm">Remove</a>
              </div>
            </div>
          </div>
        <% }) %>
      <% } %>
    </div>

    <!-- Right: Summary Section -->
    <div class="w-1/3 bg-white rounded-xl shadow-md p-6 h-fit sticky top-24">
      <h3 class="text-2xl font-bold border-b pb-3 mb-4">Price Breakdown</h3>

      <div class="space-y-3 text-gray-700 text-base">
        <div class="flex justify-between">
          <span>Total MRP</span>
          <span>₹ <%= totalMRP %></span>
        </div>
        <div class="flex justify-between">
          <span>Discount on MRP</span>
          <span>- ₹ <%= totalDiscount %></span>
        </div>
        <div class="flex justify-between">
          <span>Platform Fee</span>
          <span>₹ <%= platformFee %></span>
        </div>
        <div class="flex justify-between">
          <span>Shipping Fee</span>
          <span class="text-green-600 font-medium">FREE</span>
        </div>
      </div>

      <div class="border-t mt-4 pt-4 flex justify-between items-center">
        <h4 class="text-xl font-semibold">Total Amount</h4>
        <h4 class="text-2xl font-bold text-green-600">₹ <%= finalAmount %></h4>
      </div>

      <form action="/checkout" method="POST" class="mt-6">
        <button class="w-full py-3 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition-all">
          Proceed to Checkout
        </button>
      </form>
    </div>

  </div>
</div>

<%- include('./partials/footer') %>
